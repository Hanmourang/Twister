#!/bin/bash

PYTHON=/usr/bin/python
SERVER_PORT=8000

pid=$(ps ax | grep python | grep CentralEngine.py | awk '{print $1}')

if [ -n "$TWISTER_PATH" ]
then
    if [ -z "$pid" ]
    then
        echo Twister Server is not running.
    else
        echo Killing Twister Server, PID $pid ...
        kill -9 $pid
    fi
    echo TWISTER_PATH is set to: "$TWISTER_PATH".
    nohup $PYTHON -u $TWISTER_PATH/server/CentralEngine.py $SERVER_PORT > $TWISTER_PATH/server_log.log &
    echo "Twister Server is now running in background."
else
    echo TWISTER_PATH variable enviroment is not defined! Exiting!
fi
